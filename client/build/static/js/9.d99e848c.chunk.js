(this["webpackJsonpwine-shop"]=this["webpackJsonpwine-shop"]||[]).push([[9],{247:function(e,a,t){"use strict";var n=t(0),r=t.n(n),c=t(190),l=t(246),o=t.n(l),i=(t(243),t(245),t(210));t(28);var m=t(77),u=t(37),s=t(195),d=t(106),p=Object(d.a)((function(e){return{textarea:{resize:"none"},error:{color:"#f44336",fontSize:12,marginLeft:14,marginTop:0}}})),f=function(e){var a=e.cols,t=e.rows,c=e.label,l=e.name,o=e.handleChange,i=e.runControlValidation,m=e.formState,u=p();return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{cols:a,rows:t,className:u.textarea,placeholder:c,id:l,onChange:o,onBlur:i(l),value:m.form[l]}),m.errors&&m.errors[l]?r.a.createElement("p",{className:u.error},m.errors[l]):null)};a.a=function(e){var a=e.changeHandlerFactory,t=e.runControlValidation,n=e.formState,l=e.image,s=e.setImage,d=a("name"),p=a("year"),b=a("type"),E=a("alcohol"),h=a("size"),g=a("price"),j=a("description"),y=a("quantity"),O=function(e){!function(e,a){var t=i.Util.withSnakeCaseKeys(e);window.cloudinary.openUploadWidget(t,a)}({cloudName:"dfyamkucg",tags:[e,"anImage"],uploadPreset:"upload"},(function(e,a){e||"success"===a.event&&s(a.info.public_id)}))};return r.a.createElement(c.a,{container:!0,spacing:2},r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",name:"name",changeHandler:d,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u0420\u0435\u043a\u043e\u043b\u0442\u0430",name:"year",changeHandler:p,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u0412\u0438\u0434",name:"type",changeHandler:b,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u0420\u0430\u0437\u043c\u0435\u0440",name:"size",changeHandler:h,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u0410\u043b\u043a\u043e\u0445\u043e\u043b",name:"alcohol",changeHandler:E,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:6},r.a.createElement(u.a,{label:"\u0426\u0435\u043d\u0430",name:"price",changeHandler:g,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:5},r.a.createElement(u.a,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",name:"quantity",changeHandler:y,runControlValidation:t,formState:n})),r.a.createElement(c.a,{item:!0,xs:7},r.a.createElement("label",{htmlFor:"icon-button-file"},"\u041f\u0440\u0438\u043a\u0430\u0447\u0438 \u0441\u043d\u0438\u043c\u043a\u0430",r.a.createElement(m.a,{attr:{color:"primary","aria-label":"upload picture",component:"span"},handler:function(){return O("image")},icon:"camera"})),l?r.a.createElement(o.a,{htmlColor:"green"}):null),r.a.createElement(c.a,{item:!0,xs:12},r.a.createElement(f,{cols:45,rows:10,label:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",name:"description",handleChange:j,formState:n,runControlValidation:t})))}},412:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(214),l=t(21),o=t(7),i=t(106),m=t(400),u=t(401),s=t(27),d=Object(i.a)((function(e){return{media:{width:240,padding:15},imageCard:{marginBottom:10,padding:0,borderRadius:"20px"},imageActionArea:{display:"flex",justifyContent:"center",border:"solid 1px ".concat(e.palette.primary.text),borderRadius:"20px"}}})),p=function(e){var a=e.product,t=d();return r.a.createElement(m.a,{className:t.imageCard},r.a.createElement(s.a,{to:"details/".concat(a._id)},r.a.createElement(u.a,{className:t.imageActionArea},r.a.createElement(c.Image,{className:t.media,publicId:a.imageUrl,"fetch-format":"auto",quality:"auto",height:"300",width:"150",loading:"lazy"}))))},f=t(406),b=t(23),E=t(13),h=t(405),g=t(77),j=t(4),y=t(31),O=t(413),C=t(402),x=t(107),v=t(403),w=t(197),S=t(404),q=t(57),N=t(56),k=t(247),z=t(43),I=Object(i.a)((function(e){return{form:{width:"100%",marginTop:e.spacing(1)},closeIcon:{float:"right"}}})),V=y.a().shape({name:y.c().min(5,"Name must be at least 5 characters").required("Product name is required"),year:y.c().required("Year is required"),type:y.c().required("Type name is required"),alcohol:y.c().required("Alcohol name is required"),price:y.c().required("Price is required"),size:y.c().required("Size is required"),description:y.c().required("Description is required")}),B=Object(q.a)((function(e){var a=I(),t=e.handleClose,c=e.open,l=e.formState,o=e.runValidations,i=e.formIsInvalid,m=e.product,u=Object(n.useState)(),s=Object(b.a)(u,2),d=s[0],p=s[1];Object(n.useEffect)((function(){Object.assign(l.form,Object(j.a)(Object(j.a)({},l.form),m))}),[m]);var f=Object(n.useCallback)((function(e){e.preventDefault(),o().then((function(e){var a=Object(j.a)(Object(j.a)({},e),{},{imageUrl:d});z.a.updateProduct(a).then((function(){t()})).catch((function(e){console.log(e)}))}))}),[o,d,t]);return r.a.createElement(O.a,{open:c,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{className:a.form,onSubmit:f},r.a.createElement(C.a,{id:"form-dialog-title"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442",r.a.createElement(x.a,{component:"div",className:a.closeIcon},r.a.createElement(g.a,{handler:t,icon:"close"}))),r.a.createElement(v.a,null,r.a.createElement(w.a,null),r.a.createElement(k.a,Object.assign({},e,{image:d,setImage:p}))),r.a.createElement(S.a,null,r.a.createElement(N.a,{disabled:i(),title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435"}))))}),{name:"",year:"",type:"",alcohol:"",size:"",price:"",description:""},V),H=Object(i.a)((function(e){return{actionButtons:{display:"flex",justifyContent:"space-between"}}})),_=function(e){var a=e.product,t=H(),c=Object(n.useContext)(l.a).dispatch,i=Object(n.useState)(!1),m=Object(b.a)(i,2),u=m[0],s=m[1],d=Object(E.g)(),p=Object(n.useCallback)((function(){d.push("".concat(d.location.pathname,"/edit/").concat(a._id)),s(!0)}),[d,a._id]),f=Object(n.useCallback)((function(){d.goBack(),s(!1)}),[d]),j=Object(n.useCallback)((function(){c(Object(o.h)(a._id)),d.push("/my-products")}),[c,a._id,d]);return r.a.createElement(n.Fragment,null,r.a.createElement(h.a,{className:t.actionButtons},r.a.createElement(g.a,{handler:p,icon:"edit",attr:{size:"small",color:"inherit"}}),r.a.createElement(g.a,{handler:j,icon:"delete",attr:{size:"small",color:"inherit"}})),u?r.a.createElement(B,{handleClose:f,open:u,product:a}):null)},A=Object(i.a)((function(e){return{actionButtons:{display:"flex",justifyContent:"space-between"}}})),F=function(e){var a=e.product,t=A(),c=Object(n.useContext)(l.a).dispatch,i=Object(n.useCallback)((function(e){c(Object(o.b)(e))}),[c]);return r.a.createElement(h.a,{className:t.actionButtons},r.a.createElement(g.a,{attr:{size:"small",color:"primary"},handler:function(){return i(a)},icon:"cart"},"\u041a\u0443\u043f\u0438"),r.a.createElement(s.a,{to:"details/".concat(a._id)},r.a.createElement(g.a,{attr:{size:"small",color:"primary"},icon:"more"})))},P=Object(i.a)((function(e){return{row:{display:"flex",alignItems:"center",justifyContent:"space-between"},cardInfo:{border:"solid 1px ".concat(e.palette.primary.text),borderRadius:"20px"}}})),U=function(e){var a=e.product,t=P(),c=Object(n.useContext)(l.a).state;return r.a.createElement(m.a,{className:t.cardInfo},r.a.createElement(f.a,null,r.a.createElement("div",{className:t.row},r.a.createElement("h3",null,"\u0420\u0435\u043a\u043e\u043b\u0442\u0430"),r.a.createElement("span",null,a.year)),r.a.createElement("div",{className:t.row},r.a.createElement("h3",null,"\u0426\u0435\u043d\u0430"),r.a.createElement("span",null,a.price,"\u043b\u0432"))),c.isAuth?r.a.createElement(_,{product:a}):r.a.createElement(F,{product:a}))},R=function(e){var a=e.product;return r.a.createElement(n.Fragment,null,r.a.createElement(p,{product:a}),r.a.createElement(U,{product:a}))},T=t(190),D=Object(i.a)((function(e){return{root:{padding:20,alignSelf:"center",paddingLeft:150,marginBottom:e.spacing(12)},item:{margin:20}}}));a.default=function(){var e=D(),a=(Object(E.j)(),Object(E.h)()),t=Object(n.useContext)(l.a),i=t.state,m=t.dispatch;Object(n.useEffect)((function(){i.isAuth?m(Object(o.n)()):m(Object(o.k)())}),[a.pathname,i.products.length]);var u=i.products.map((function(a){return r.a.createElement(T.a,{className:e.item,item:!0,xs:3,key:a._id},r.a.createElement(R,{product:a}))}));return r.a.createElement(c.CloudinaryContext,{cloudName:"dfyamkucg"},r.a.createElement(T.a,{container:!0,className:e.root},u))}}}]);
//# sourceMappingURL=9.d99e848c.chunk.js.map